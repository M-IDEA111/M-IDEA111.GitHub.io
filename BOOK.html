<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M IDEA Book</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #03ffba;
            --primary-color-light: #03ffed;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #f5f5f5;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            --naruto-orange: #ff7700;
            --naruto-blue: #0066cc;
            --aot-red: #c70000;
            --aot-dark: #333333;
            --naruto-bg: linear-gradient(135deg, #1a1a1a, #0d0d0d);
            --aot-bg: linear-gradient(135deg, #0a0a0a, #121212);
        }
        
        body {
            background: var(--naruto-bg);
            color: var(--dark-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-attachment: fixed;
            padding-top: 140px;
            transition: background 0.5s ease;
        }
        
        body.aot-theme {
            background: var(--aot-bg);
        }
        
        /* Header Styles */
        header {
            background: rgba(0, 0, 0, 0.85);
            padding: 0.8rem 1.5rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 2px solid var(--primary-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .header-bottom {
            width: 100%;
            max-width: 600px;
        }
        
        .logo-img {
            height: 50px;
            transition: transform 0.3s;
            filter: drop-shadow(0 0 10px var(--primary-color-light));
        }
        
        .logo-img:hover {
            transform: scale(1.05);
        }
        
        .search-bar {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(3, 255, 186, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
            50% { box-shadow: 0 0 20px rgba(3, 255, 186, 0.5); }
            100% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
        }
        
        .search-bar input {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background-color: rgba(0, 0, 0, 0.5);
            color: var(--dark-text);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }
        
        .search-bar input:focus {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .search-bar button {
            padding: 0 22px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .search-bar button:hover {
            background: linear-gradient(90deg, var(--primary-color-light), var(--primary-color));
            transform: scale(1.05);
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.4rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .icon-btn:hover {
            background-color: rgba(3, 255, 186, 0.1);
            transform: rotate(10deg);
            color: var(--primary-color-light);
        }
        
        .icon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(3, 255, 186, 0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .icon-btn:hover::before {
            opacity: 1;
        }
        
        /* Settings Menu */
        .settings-menu {
            position: fixed;
            top: 90px;
            right: 20px;
            background-color: #2c2c2c;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            width: 300px;
            padding: 1.5rem;
            display: none;
            z-index: 1000;
            border: 1px solid rgba(3, 255, 186, 0.3);
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .settings-menu.active {
            display: block;
        }
        
        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .settings-section {
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .settings-title {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .social-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: var(--border-radius);
            color: var(--dark-text);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            background-color: var(--primary-color);
            color: #000;
        }
        
        .social-link i {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .social-link:hover i {
            color: #000;
        }
        
        /* Navigation - under search bar */
        nav {
            background: rgba(0, 0, 0, 0.8);
            padding: 0.8rem 0;
            position: sticky;
            top: 140px;
            z-index: 999;
            border-bottom: 1px solid rgba(3, 255, 186, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .category-btn {
            background: none;
            border: none;
            color: #aaa;
            padding: 8px 0;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            z-index: 1;
            font-weight: 600;
        }
        
        .category-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            transition: width 0.4s ease;
            z-index: -1;
        }
        
        .category-btn:hover, .category-btn.active {
            color: var(--primary-color);
        }
        
        .category-btn:hover::after, .category-btn.active::after {
            width: 100%;
        }
        
        /* Main Content */
        main {
            padding: 1.5rem;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .section-title {
            font-size: 1.7rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.4rem;
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(3, 255, 186, 0.5);
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .book-card {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border: 1px solid rgba(3, 255, 186, 0.1);
        }
        
        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(3, 255, 186, 0.3);
        }
        
        .book-cover {
            height: 320px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .book-cover.naruto {
            background: linear-gradient(135deg, var(--naruto-orange), var(--naruto-blue));
        }
        
        .book-cover.aot {
            background: linear-gradient(135deg, var(--aot-red), var(--aot-dark));
        }
        
        .cover-image {'
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .book-card:hover .cover-image {
            transform: scale(1.05);
        }
        
        .book-info {
            padding: 1rem;
        }
        
        .book-title {
            font-size: 1.2rem;
            margin-bottom: 0.4rem;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .book-author {
            color: #aaa;
            font-size: 0.85rem;
            margin-bottom: 0.4rem;
        }
        
        .book-description {
            color: #ccc;
            font-size: 0.85rem;
            line-height: 1.6;
            margin-bottom: 0.6rem;
        }
        
        .book-pages {
            display: inline-block;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-top: 0.3rem;
            font-weight: bold;
        }
        
        /* Reading Section */
        .reading-container {
            display: none;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .reading-header {
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .reading-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .back-to-books {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .back-to-books:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(3, 255, 186, 0.4);
        }
        
        .reading-content {
            padding: 1.5rem;
            line-height: 1.8;
            font-size: 1rem;
            min-height: 400px;
            background: rgba(30, 30, 30, 0.8);
        }
        
        .page-image-container {
            width: 100%;
            max-height: 380px;
            overflow: hidden;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .page-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        
        .page-text {
            margin-top: 15px;
        }
        
        .page-text p {
            margin-bottom: 12px;
            text-align: justify;
        }
        
        .episode-title {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            border-bottom: 1px solid var(--primary-color-light);
            padding-bottom: 0.4rem;
        }
        
        .character {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .naruto-character {
            background: rgba(255, 119, 0, 0.2);
            color: var(--naruto-orange);
        }
        
        .aot-character {
            background: rgba(199, 0, 0, 0.2);
            color: var(--aot-red);
        }
        
        .chapter-info {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.85rem;
            color: var(--primary-color-light);
        }
        
        .page-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.7);
            border-top: 2px solid var(--primary-color);
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .nav-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .nav-btn:disabled:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--dark-text);
        }
        
        .page-indicator {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            z-index: 10;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding-top: 160px;
            }
            
            header {
                padding: 8px 10px;
            }
            
            .logo-img {
                height: 40px;
            }
            
            .icon-btn {
                width: 38px;
                height: 38px;
                font-size: 1.2rem;
            }
            
            nav {
                top: 128px;
                padding: 0.5rem 0;
            }
            
            .section-title {
                font-size: 1.5rem;
                margin: 1.2rem 0 0.8rem;
            }
            
            .books-grid {
                grid-template-columns: 1fr;
                gap: 1.2rem;
                margin-bottom: 1.5rem;
            }
            
            .book-cover {
                height: 280px;
            }
            
            .settings-menu {
                top: 110px;
                right: 10px;
                width: 90%;
            }
            
            .header-top {
                margin-bottom: 5px;
            }
            
            .categories {
                gap: 1rem;
            }
            
            .category-btn {
                font-size: 1rem;
                padding: 6px 0;
            }
            
            .search-bar input {
                padding: 12px 16px;
            }
            
            .search-bar button {
                padding: 0 18px;
            }
        }
        
        @media (min-width: 769px) {
            .header-top {
                max-width: 1200px;
                width: 100%;
            }
            .header-bottom {
                max-width: 600px;
                margin-top: 10px;
            }
            
            nav {
                top: 138px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 150px;
            }
            
            .logo-img {
                height: 35px;
            }
            
            .icon-btn {
                width: 35px;
                height: 35px;
                font-size: 1.1rem;
            }
            
            .categories {
                gap: 0.8rem;
            }
            
            .category-btn {
                font-size: 0.9rem;
            }
            
            nav {
                top: 118px;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .book-cover {
                height: 250px;
            }
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(3, 255, 186, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .source-reference {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Header with Logo, Search, Settings and Exit Icon -->
    <header>
        <div class="header-top">
            <!-- Settings icon on the left -->
            <div class="header-icons">
                <button class="icon-btn" id="settings-btn">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
            
            <!-- Logo in the center -->
            <img src="Picsart_25-07-23_05-13-20-665.png" alt="M IDEA Book Logo" class="logo-img" id="logo">
            
            <!-- Exit icon on the right -->
            <div class="header-icons">
                <button class="icon-btn" id="exit-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- Search bar -->
        <div class="header-bottom">
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search the library...">
                <button id="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Settings menu -->
    <div class="settings-menu" id="settings-menu">
        <div class="settings-section">
            <h3 class="settings-title"><i class="fas fa-link"></i> Social Media</h3>
            <div class="social-links">
                <a href="https://discord.gg/WDrpNjfA" target="_blank" class="social-link">
                    <i class="fab fa-discord"></i>
                    <span>Join our Discord community</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Navigation - under search bar -->
    <nav>
        <div class="categories">
            <button class="category-btn active" data-category="all">All</button>
            <button class="category-btn" data-category="anime">Anime</button>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main>
        <!-- Books Section -->
        <div class="books-section" id="books-section">
            <h2 class="section-title">Anime</h2>
            <div class="books-grid" id="books-grid">
                <!-- Books will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Reading Section -->
        <div class="reading-container" id="reading-container">
            <div class="reading-header">
                <h3 class="reading-title" id="reading-title"></h3>
                <button class="back-to-books" id="back-to-books">
                    <i class="fas fa-arrow-left"></i> Back to Library
                </button>
            </div>
            
            <div class="reading-content" id="reading-content">
                <!-- Current page content -->
            </div>
            
            <div class="page-navigation">
                <button class="nav-btn" id="prev-page" disabled>
                    <i class="fas fa-arrow-right"></i> Previous Page
                </button>
                
                <div class="page-indicator" id="page-indicator">Page 1 of 5</div>
                
                <button class="nav-btn" id="next-page">
                    Next Page <i class="fas fa-arrow-left"></i>
                </button>
            </div>
        </div>
    </main>
    
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
    </div>
    
    <script>
        // Books data (two seasons) with real manga content
        const books = [
            {
                id: 1,
                title: "Naruto Shippuden Season 6",
                author: "Masashi Kishimoto",
                category: "anime",
                description: "The story of Naruto Uzumaki on his journey to become the Seventh Hokage, facing new challenges and powerful enemies in the ninja world",
                pages: 5,
                coverImage: "00f993fde8debed82a8d401b69fe01df.jpg",
                content: [
                    {
                        title: "Naruto's Return",
                        description: "After training with Jiraiya, Naruto returns to Konoha stronger than before",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 245: Homecoming</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 245</div>
                        <p>After two and a half years of training with Jiraiya, Naruto returns to the Village Hidden in the Leaves (Konoha). He notices slight changes in the village, especially Tsunade's face carved on the Hokage Mountain. Naruto meets Sakura and Konohamaru, and everyone notices how Naruto has grown and become more mature.</p>
                        <p>Sakura asks Naruto: "Do I look like a woman now?" Naruto replies: "No, you're still the same!" which angers her and she hits him hard. Jiraiya is surprised by Sakura's strength.</p>
                        <p>Tsunade asks Naruto and Sakura to test their new strength in a confrontation against Kakashi.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 245</p>`
                    },
                    {
                        title: "Team 7 Test",
                        description: "A match between Team 7 and Kakashi to test their progress",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 246: The New Test</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 246</div>
                        <p>In the training ground, the fight between Team 7 and Kakashi begins. Kakashi looks comfortable and challenges the two: "Show me what you've learned during these two years."</p>
                        <p>Naruto starts attacking using the Shadow Clone technique. But Kakashi easily dodges the attacks. Then Naruto decides to use a new technique he learned: the Rasengan!</p>
                        <p>While Sakura focuses on developing her medical skills and physical strength, Naruto shows his ability to produce the Rasengan with one hand.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 246</p>`
                    },
                    {
                        title: "The New Rasengan",
                        description: "Naruto shows his new abilities with the Rasengan",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 247: The Improved Rasengan</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 247</div>
                        <p>Naruto creates a very large Rasengan and directs it towards Kakashi. But Kakashi uses the Mud Wall technique to avoid the attack.</p>
                        <p>Naruto discovers that Kakashi put a mark on him during the attack. Naruto asks: "When did you do that?" Kakashi replies: "When you were busy attacking, I put an explosive tag on your back."</p>
                        <p>Naruto and Sakura decide to work together. Sakura starts attacking Kakashi with great force that breaks the ground. Kakashi is impressed: "Your physical strength has become truly amazing, Sakura!".</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 247</p>`
                    },
                    {
                        title: "Team Cooperation",
                        description: "Naruto and Sakura cooperate against Kakashi",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 248: Deadly Cooperation</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 248</div>
                        <p>Sakura uses her medical skills to deliver precise blows. While Naruto plans a trick using his shadows. The plan seems to work and Kakashi is trapped between Naruto and Sakura.</p>
                        <p>Suddenly, Kakashi appears behind them. The one they trapped was just a clone. Kakashi tells them that the test is over and they have succeeded: "You've become strong enough to protect Sasuke."</p>
                        <p>Kakashi reveals that if they continued fighting they might have defeated him. Then he tells them about a new mission: Rescue the Kazekage Gaara from the Sand Village who was kidnapped by Akatsuki.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 248</p>`
                    },
                    {
                        title: "Gaara Rescue Mission",
                        description: "Team 7 sets out to rescue Gaara",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 249: Rescue the Kazekage</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 249</div>
                        <p>Team 7 sets out on their mission to rescue Gaara. On the way, Kakashi explains that Akatsuki is pursuing "Jinchuriki" - bearers of the tailed beasts, like Naruto and Gaara.</p>
                        <p>The team arrives at the Sand Village to find that Gaara has been taken to the Akatsuki hideout. Temari, Gaara's sister, tells them that he sacrificed himself to protect the village.</p>
                        <p>Team 7 decides to pursue Akatsuki with some Sand ninjas to rescue Gaara before they extract his tailed beast, Shukaku.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 249</p>`
                    }
                ]
            },
            {
                id: 2,
                title: "Attack on Titan Season 4",
                author: "Hajime Isayama",
                category: "anime",
                description: "Continuation of the epic saga where the secrets of the walls and titans are revealed",
                pages: 5,
                coverImage: "f13da44847f5c86cef64753ac9da73d5.jpg",
                content: [
                    {
                        title: "The Other Side of the Sea",
                        description: "Discovering new lands beyond the walls and the horrifying truth",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 91: The Truth Behind the Walls</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 91</div>
                        <p>After discovering the basement in Eren's house, Eren, Mikasa, and Armin uncover the terrifying truth about the world beyond the walls. They learn that humanity outside the walls lives in advanced technological development, and considers the wall inhabitants "devils" because of their ability to transform into titans.</p>
                        <p>Eren discovers that his father, Grisha, came from outside the walls, and that he transferred the power of the Attack Titan to him before his death. He also discovers that the Eldian people (his ancestors) are the ones who created the titans and used them to control the world.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 91</p>`
                    },
                    {
                        title: "Enemy Territory",
                        description: "Eren and his companions in Marley territory",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 92: In Enemy Territory</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 92</div>
                        <p>Four years after discovering the truth, Eren and his companions travel to Marley territory disguised. They witness the persecution of the Eldian people in ghetto neighborhoods, and hear a speech by Marley's military commander, Calvi, who announces that it's time to retrieve the "Founding Titan" from Paradis Island.</p>
                        <p>Eren watches a military show where Eldian children are trained to become "Titan Shifters" for Marley. Among them is Reiner, his former comrade in the Survey Corps, who is now working as a spy for Paradis Island.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 92</p>`
                    },
                    {
                        title: "Liberio Attack",
                        description: "The beginning of the attack on Marley",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 93: Liberio Attack</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 93</div>
                        <p>During the celebration of granting the Armored Titan power to "Porco," Eren and his team attack the city of Liberio in Marley. Eren transforms into his Attack Titan and attacks the building where Marley's leaders are located.</p>
                        <p>Mikasa and Armin appear with members of the Survey Corps to help Eren. Armin transforms into the Colossal Titan and destroys Marley's naval fleet.</p>
                        <p>The team specifically targets Marley's Titan Shifters, including Porco who just received the Armored Titan.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 93</p>`
                    },
                    {
                        title: "Battle of Liberio",
                        description: "The epic confrontation in Liberio",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 94: Battle of the Titans</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 94</div>
                        <p>A huge battle erupts in the streets of Liberio between Titan Shifters from Paradis Island and Marley. Eren faces Porco (bearer of the Armored Titan) and Porco shows amazing skill in controlling the Armored Titan despite having just received the power.</p>
                        <p>Zeke (bearer of the Beast Titan) joins the battle and uses his voice to turn the Eldians in the ghetto into titans. But Hange and other soldiers from Paradis Island prevent this catastrophe.</p>
                        <p>During the battle, Reiner recognizes Eren and is shocked by his transformation into an aggressive character.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 94</p>`
                    },
                    {
                        title: "Battle Aftermath",
                        description: "The tragic results of the attack on Liberio",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 95: Fall of the War Hammer Titan</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 95</div>
                        <p>Eren succeeds in capturing Zeke, the bearer of the Beast Titan, and swallows him to gain his power. Meanwhile, Porco (Armored Titan) continues to fight but suffers a crushing defeat from Mikasa who destroys his armor using advanced machine guns.</p>
                        <p>Armin (Colossal Titan) destroys most of Liberio city, resulting in thousands of casualties. Eren declares that their goal is to destroy the outside world to protect Paradis Island.</p>
                        <p>The Survey Corps withdraws after achieving their goals, leaving behind a destroyed city and the Marleyan people in shock at the power of Paradis Island.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 95</p>`
                    }
                ]
            }
        ];
        
        // DOM elements
        const settingsBtn = document.getElementById('settings-btn');
        const exitBtn = document.getElementById('exit-btn');
        const logo = document.getElementById('logo');
        const booksGrid = document.getElementById('books-grid');
        const booksSection = document.getElementById('books-section');
        const readingContainer = document.getElementById('reading-container');
        const readingTitle = document.getElementById('reading-title');
        const readingContent = document.getElementById('reading-content');
        const backToBooksBtn = document.getElementById('back-to-books');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const pageIndicator = document.getElementById('page-indicator');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const settingsMenu = document.getElementById('settings-menu');
        const loadingSpinner = document.getElementById('loading-spinner');
        
        // App state
        let currentBook = null;
        let currentPage = 0;
        let currentTheme = 'naruto';
        
        // Initialize site
        function initSite() {
            // Display books
            renderBooks(books);
            
            // Add event listeners
            settingsBtn.addEventListener('click', toggleSettingsMenu);
            exitBtn.addEventListener('dblclick', goToHomePage);
            logo.addEventListener('dblclick', refreshPage);
            
            // Reading section events
            backToBooksBtn.addEventListener('click', showBooksView);
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);
            
            // Category filtering
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    filterBooks(category);
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Search
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            
            // Close settings menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!settingsMenu.contains(e.target) && !settingsBtn.contains(e.target)) {
                    settingsMenu.classList.remove('active');
                }
            });
        }
        
  // Display books
        function renderBooks(booksArray) {
            booksGrid.innerHTML = '';
            
            if (booksArray.length === 0) {
                booksGrid.innerHTML = '<p class="no-results">No results found</p>';
                return;
            }
            booksArray.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.dataset.id = book.id;
                bookCard.dataset.category = book.category;
                bookCard.innerHTML = `
                    <div class="book-cover ${book.id === 1 ? 'naruto' : 'aot'}">
                        <img src="${book.coverImage}" alt="${book.title}" class="cover-image">
                    </div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">${book.author}</p>
                        <p class="book-description">${book.description}</p>
                        <span class="book-pages">${book.pages} pages</span>
                    </div>
                `;
                
                bookCard.addEventListener('click', () => {
                    openBook(book);
                });
                
                booksGrid.appendChild(bookCard);
            });
        }
        
        // Open book
        function openBook(book) {
            // Show loading indicator
            loadingSpinner.style.display = 'block';
            
            setTimeout(() => {
                currentBook = book;
                currentPage = 0;
                
                // Change theme based on book
                currentTheme = book.id === 1 ? 'naruto' : 'aot';
                document.body.classList.toggle('aot-theme', currentTheme === 'aot');
                
                updateReadingView();
                
                // Show reading section and hide library section
                booksSection.style.display = 'none';
                readingContainer.style.display = 'block';
                
                // Hide loading indicator
                loadingSpinner.style.display = 'none';
            }, 500);
        }
        
        // Update reading view
        function updateReadingView() {
            // Update title
            readingTitle.textContent = currentBook.title;
            
            // Update current page content
            renderPageContent();
            
            // Update page indicator
            pageIndicator.textContent = `Page ${currentPage + 1} of ${currentBook.content.length}`;
            
            // Update navigation buttons state
            prevPageBtn.disabled = currentPage <= 0;
            nextPageBtn.disabled = currentPage >= currentBook.content.length - 1;
        }
        
        // Display current page content
        function renderPageContent() {
            const content = currentBook.content[currentPage];
            
            readingContent.innerHTML = `
                <div class="page-image-container">
                    <img src="${content.image}" alt="${content.title}" class="page-image">
                </div>
                <div class="page-text">
                    ${content.text}
                </div>
            `;
        }
        
        // Go to previous page
        function goToPrevPage() {
            if (currentPage > 0) {
                currentPage--;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // Go to next page
        function goToNextPage() {
            if (currentPage < currentBook.content.length - 1) {
                currentPage++;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // Return to library view
        function showBooksView() {
            booksSection.style.display = 'block';
            readingContainer.style.display = 'none';
            
            // Reload books
            renderBooks(books);
        }
        
        // Toggle settings menu
        function toggleSettingsMenu(e) {
            e.stopPropagation();
            settingsMenu.classList.toggle('active');
        }
        
        // Go to home page
        function goToHomePage() {
            window.location.href = 'index.html';
        }
        
        // Refresh page
        function refreshPage() {
            window.location.reload();
        }
        
        // Filter books by category
        function filterBooks(category) {
            if (category === 'all') {
                renderBooks(books);
            } else {
                const filteredBooks = books.filter(book => book.category === category);
                renderBooks(filteredBooks);
            }
        }
        
        // Perform search
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                renderBooks(books);
                return;
            }
            
            const results = books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) || 
                book.author.toLowerCase().includes(searchTerm) ||
                book.description.toLowerCase().includes(searchTerm)
            );
            
            renderBooks(results);
        }
        
        // Initialize site when DOM is loaded
        document.addEventListener('DOMContentLoaded', initSite);
    </script>
</body>
</html>
