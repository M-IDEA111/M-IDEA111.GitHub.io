<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M IDEA Book</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #03ffba;
            --primary-color-light: #03ffed;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #f5f5f5;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            --naruto-orange: #ff7700;
            --naruto-blue: #0066cc;
            --aot-red: #c70000;
            --aot-dark: #333333;
            --classic-gold: #d4af37;
            --classic-dark: #2a211c;
            --naruto-bg: linear-gradient(135deg, #1a1a1a, #0d0d0d);
            --aot-bg: linear-gradient(135deg, #0a0a0a, #121212);
            --classic-bg: linear-gradient(135deg, #1a1612, #0f0c09);
        }
        
        body {
            background: var(--naruto-bg);
            color: var(--dark-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-attachment: fixed;
            padding-top: 100px; /* تقليل الحشوة العلوية */
            transition: background 0.5s ease;
        }
        
        body.aot-theme {
            background: var(--aot-bg);
        }
        
        body.classic-theme {
            background: var(--classic-bg);
        }
        
        /* Header Styles - UPDATED */
        header {
            background: rgba(0, 0, 0, 0.85);
            padding: 0.8rem 1.2rem; /* تقليل الحشوة */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--primary-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            height: 80px; /* ارتفاع ثابت للهيدر */
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 12px; /* تقليل المسافة بين العناصر */
            flex: 1;
        }
        
        .header-center {
            flex: 2;
            display: flex;
            justify-content: center;
            max-width: 500px; /* تقليل العرض الأقصى */
        }
        
        .header-right {
            flex: 1;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 12px; /* تقليل المسافة بين العناصر */
        }
        
        .logo-img {
            height: 60px; /* تقليل حجم الشعار */
            transition: transform 0.3s;
            filter: drop-shadow(0 0 10px var(--primary-color-light));
        }
        
        .logo-img:hover {
            transform: scale(1.05);
        }
        
        .search-bar {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(3, 255, 186, 0.3);
            animation: pulse 2s infinite;
            height: 42px; /* ارتفاع ثابت لشريط البحث */
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
            50% { box-shadow: 0 0 20px rgba(3, 255, 186, 0.5); }
            100% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
        }
        
        .search-bar input {
            flex: 1;
            padding: 10px 16px; /* تقليل الحشوة */
            border: none;
            background-color: rgba(0, 0, 0, 0.5);
            color: var(--dark-text);
            font-size: 0.9rem; /* تقليل حجم الخط */
            outline: none;
            transition: all 0.3s;
            height: 100%;
        }
        
        .search-bar input:focus {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .search-bar button {
            padding: 0 18px; /* تقليل الحشوة */
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            cursor: pointer;
            font-size: 1rem; /* تقليل حجم الخط */
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        
        .search-bar button:hover {
            background: linear-gradient(90deg, var(--primary-color-light), var(--primary-color));
            transform: scale(1.05);
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.2rem; /* تقليل حجم الأيقونة */
            cursor: pointer;
            padding: 6px;
            border-radius: 50%;
            transition: all 0.3s;
            width: 38px; /* تقليل الحجم */
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .icon-btn:hover {
            background-color: rgba(3, 255, 186, 0.1);
            transform: rotate(10deg);
            color: var(--primary-color-light);
        }
        
        .icon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(3, 255, 186, 0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .icon-btn:hover::before {
            opacity: 1;
        }
        
        .exit-btn {
            display: flex;
            align-items: center;
            gap: 6px; /* تقليل المسافة */
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 0.95rem; /* تقليل حجم الخط */
            cursor: pointer;
            padding: 8px 12px; /* تقليل الحشوة */
            border-radius: 30px;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .exit-btn:hover {
            background-color: rgba(3, 255, 186, 0.1);
            color: var(--primary-color-light);
        }
        
        .transfer-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 0.95rem; /* تقليل حجم الخط */
            padding: 8px 12px; /* تقليل الحشوة */
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px; /* تقليل المسافة */
        }
        
        .transfer-btn:hover {
            background-color: rgba(3, 255, 186, 0.1);
            color: var(--primary-color-light);
        }
        
        /* Settings Menu */
        .settings-menu {
            position: fixed;
            top: 80px;
            right: 20px;
            background-color: #2c2c2c;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            width: 300px;
            padding: 1.5rem;
            display: none;
            z-index: 1000;
            border: 1px solid rgba(3, 255, 186, 0.3);
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .settings-menu.active {
            display: block;
        }
        
        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .settings-section {
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .settings-title {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .social-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: var(--border-radius);
            color: var(--dark-text);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            background-color: var(--primary-color);
            color: #000;
        }
        
        .social-link i {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .social-link:hover i {
            color: #000;
        }
        
        /* Main Content */
        main {
            padding: 1.5rem;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .section-title {
            font-size: 1.7rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.4rem;
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(3, 255, 186, 0.5);
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .book-card {
            background-color: transparent;
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .book-card:hover {
            transform: translateY(-8px);
        }
        
        .book-cover {
            height: 220px;
            width: 160px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .book-cover.naruto {
            background: linear-gradient(135deg, var(--naruto-orange), var(--naruto-blue));
        }
        
        .book-cover.aot {
            background: linear-gradient(135deg, var(--aot-red), var(--aot-dark));
        }
        
        .book-cover.classic {
            background: linear-gradient(135deg, var(--classic-gold), var(--classic-dark));
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .book-card:hover .cover-image {
            transform: scale(1.05);
        }
        
        .book-title {
            font-size: 1rem;
            margin-top: 10px;
            color: var(--primary-color);
            font-weight: 600;
            text-align: center;
            max-width: 160px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* Reading Section */
        .reading-container {
            display: none;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .reading-header {
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--primary-color);
        }
         .reading-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .back-to-books {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .back-to-books:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(3, 255, 186, 0.4);
        }
        
        .reading-content {
            padding: 1.5rem;
            line-height: 1.8;
            font-size: 1rem;
            min-height: 400px;
            background: rgba(30, 30, 30, 0.8);
        }
        
        .page-image-container {
            width: 100%;
            max-height: 380px;
            overflow: hidden;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .page-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        
        .page-text {
            margin-top: 15px;
        }
        
        .page-text p {
            margin-bottom: 12px;
            text-align: justify;
        }
        
        .episode-title {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            border-bottom: 1px solid var(--primary-color-light);
            padding-bottom: 0.4rem;
        }
        
        .character {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .naruto-character {
            background: rgba(255, 119, 0, 0.2);
            color: var(--naruto-orange);
        }
        
        .aot-character {
            background: rgba(199, 0, 0, 0.2);
            color: var(--aot-red);
        }
        
        .chapter-info {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.85rem;
            color: var(--primary-color-light);
        }
        
        .book-description {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid var(--primary-color);
        }
        
        .book-meta {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .book-author-reading {
            font-size: 1rem;
            color: #aaa;
        }
        
        .page-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.7);
            border-top: 2px solid var(--primary-color);
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .nav-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .nav-btn:disabled:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--dark-text);
        }
        
        .page-indicator {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            z-index: 10;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        /* Category Sections */
        .category-section {
            margin-bottom: 3rem;
        }
        
        .category-title {
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.4rem;
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(3, 255, 186, 0.5);
        }
        
        /* View More Button */
        .view-more-container {
            display: flex;
            justify-content: flex-end;
            margin-top: -1rem;
            margin-bottom: 2rem;
        }
        
        .view-more-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .view-more-btn:hover {
            background: var(--primary-color);
            color: #000;
            transform: translateX(5px);
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            }
            
            .book-cover {
                height: 200px;
                width: 150px;
            }
        }
        
        @media (max-width: 992px) {
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 1.2rem;
            }
            
            .book-cover {
                height: 190px;
                width: 140px;
            }
        }
        
        @media (max-width: 768px) {
            body {
                padding-top: 120px; /* تقليل الحشوة العلوية */
            }
            
            header {
                padding: 8px 10px;
                flex-direction: row; /* الحفاظ على الترتيب الأفقي */
                height: 70px; /* تقليل الارتفاع */
                gap: 10px;
            }
            
            .header-left, .header-center, .header-right {
                width: auto;
                justify-content: center;
            }
            
            .header-right {
                order: 3; /* الحفاظ على الترتيب */
            }
            
            .logo-img {
                height: 45px; /* تقليل حجم الشعار */
            }
            
            .icon-btn {
                width: 34px;
                height: 34px;
                font-size: 1.1rem;
            }
            
            .section-title, .category-title {
                font-size: 1.4rem;
                margin: 1.2rem 0 0.8rem;
            }
            
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
                gap: 1.2rem;
                margin-bottom: 1.5rem;
            }
            
            .book-cover {
                height: 180px;
                width: 130px;
            }
            
            .book-title {
                font-size: 0.9rem;
                max-width: 130px;
            }
            
            .settings-menu {
                top: 100px;
                right: 10px;
                width: 90%;
            }
            
            .search-bar {
                height: 38px;
            }
            
            .search-bar input {
                padding: 8px 14px;
                font-size: 0.85rem;
            }
            
            .search-bar button {
                padding: 0 16px;
                font-size: 0.9rem;
            }
            
            .transfer-btn, .exit-btn {
                font-size: 0.85rem;
                padding: 6px 10px;
            }
        }
        
        @media (min-width: 769px) {
            .header-center {
                max-width: 450px; /* تقليل العرض الأقصى */
            }
        }
        
        @media (max-width: 576px) {
            body {
                padding-top: 110px; /* تقليل الحشوة العلوية */
            }
            
            header {
                height: 65px;
                padding: 6px 8px;
            }
            
            .logo-img {
                height: 40px;
            }
            
            .icon-btn {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
            
            .section-title, .category-title {
                font-size: 1.3rem;
            }
            
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
                gap: 1rem;
            }
            
            .book-cover {
                height: 160px;
                width: 120px;
            }
            
            .book-title {
                font-size: 0.85rem;
                max-width: 120px;
            }
            
            .search-bar {
                height: 36px;
            }
            
            .search-bar input {
                padding: 7px 12px;
                font-size: 0.8rem;
            }
            
            .search-bar button {
                padding: 0 14px;
                font-size: 0.85rem;
            }
            
            .transfer-btn, .exit-btn {
                font-size: 0.8rem;
                padding: 5px 8px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 100px; /* تقليل الحشوة العلوية */
            }
            
            header {
                height: 60px;
                padding: 5px;
            }
            
            .logo-img {
                height: 35px;
            }
            
            .icon-btn {
                width: 30px;
                height: 30px;
                font-size: 0.9rem;
            }
            
            .section-title, .category-title {
                font-size: 1.2rem;
            }
            
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 0.8rem;
            }
            
            .book-cover {
                height: 150px;
                width: 110px;
            }
            
            .book-title {
                font-size: 0.8rem;
                max-width: 110px;
            }
            
            .search-bar {
                height: 34px;
            }
            
            .search-bar input {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .search-bar button {
                padding: 0 12px;
                font-size: 0.8rem;
            }
            
            .transfer-btn, .exit-btn {
                font-size: 0.75rem;
                padding: 4px 6px;
            }
            
            /* تعديلات إضافية للحفاظ على الترتيب في الشاشات الصغيرة جدًا */
            .header-left {
                gap: 5px;
            }
            
            .header-right {
                gap: 5px;
            }
        }
        
        @media (max-width: 360px) {
            /* تعديلات إضافية للشاشات الصغيرة جدًا */
            .transfer-btn span, .exit-btn span {
                display: none; /* إخفاء النص في الشاشات الصغيرة جدًا */
            }
            
            .transfer-btn, .exit-btn {
                padding: 6px;
            }
            
            .header-left {
                flex: 0.8;
            }
            
            .header-center {
                flex: 1.5;
            }
            
            .header-right {
                flex: 0.8;
            }
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(3, 255, 186, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .source-reference {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
            font-style: italic;
        }
        
        .no-results {
            text-align: center;
            grid-column: 1 / -1;
            padding: 2rem;
            color: #aaa;
            font-size: 1.2rem;
        }
        
        /* Back to Categories Button */
        .back-to-categories {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            padding: 10px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .back-to-categories:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(3, 255, 186, 0.4);
        }
    </style>
</head>
<body>
   <!-- Header with Logo, Search, Transfer and Exit Icon -->
    <header>
        <!-- Left side: Transfer and Exit buttons -->
        <div class="header-left">
            <button class="transfer-btn" id="transfer-btn">
                <i class="fas fa-exchange-alt"></i> <span>Transfer</span>
            </button>
            <button class="exit-btn" id="exit-btn">
                <i class="fas fa-door-open"></i> <span>Exit</span>
            </button>
        </div>
        
        <!-- Center: Search bar -->
        <div class="header-center">
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search the library...">
                <button id="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
        
        <!-- Right side: Logo -->
        <div class="header-right">
            <img src="Picsart_25-07-23_05-13-20-665.png" alt="M IDEA Book Logo" class="logo-img" id="logo">
        </div>
    </header>
    
    <!-- Settings menu -->
    <div class="settings-menu" id="settings-menu">
        <div class="settings-section">
            <h3 class="settings-title"><i class="fas fa-exchange-alt"></i> Transfer to Section</h3>
            <div class="social-links">
                <a href="#" class="social-link" data-section="anime">
                    <i class="fas fa-dragon"></i>
                    <span>Anime Section</span>
                </a>
                <a href="#" class="social-link" data-section="classic">
                    <i class="fas fa-book"></i>
                    <span>Classic Novels</span>
                </a>
            </div>
        </div>
        
        <div class="settings-section">
            <h3 class="settings-title"><i class="fas fa-link"></i> Social Media</h3>
            <div class="social-links">
                <a href="https://discord.gg/WDrpNjfA" target="_blank" class="social-link">
                    <i class="fab fa-discord"></i>
                    <span>Join our Discord community</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <main>
        <!-- Books Section -->
        <div class="books-section" id="books-section">
            <!-- زر العودة إلى الأقسام (يظهر فقط عند التصفية) -->
            <button class="back-to-categories" id="back-to-categories" style="display: none;">
                <i class="fas fa-arrow-left"></i> Back to All Categories
            </button>
            
            <!-- Anime Section -->
            <div class="category-section" id="anime-section">
                <h3 class="category-title">Anime</h3>
                <div class="books-grid" id="anime-books-grid">
                    <!-- Anime books will be populated by JavaScript -->
                </div>
                <!-- زر "المزيد" للأنمي -->
                <div class="view-more-container">
                    <button class="view-more-btn" data-category="anime">
                        <span>More</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
            
            <!-- Classic Novels Section -->
            <div class="category-section" id="classic-section">
                <h3 class="category-title">Classic Novels</h3>
                <div class="books-grid" id="classic-books-grid">
                    <!-- Classic books will be populated by JavaScript -->
                </div>
                <!-- زر "المزيد" للكلاسيك -->
                <div class="view-more-container">
                    <button class="view-more-btn" data-category="classic">
                        <span>More</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Reading Section -->
        <div class="reading-container" id="reading-container">
            <div class="reading-header">
                <h3 class="reading-title" id="reading-title"></h3>
                <button class="back-to-books" id="back-to-books">
                    <i class="fas fa-arrow-left"></i> Back to Categories
                </button>
            </div>
            
            <div class="reading-content" id="reading-content">
                <!-- Current page content -->
            </div>
            
            <div class="page-navigation">
                <button class="nav-btn" id="prev-page" disabled>
                    <i class="fas fa-arrow-left"></i> Previous Page
                </button>
                
                <div class="page-indicator" id="page-indicator">Page 1 of 5</div>
                
                <button class="nav-btn" id="next-page">
                    Next Page <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </main>
    
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
    </div>
    
    <script>
        // Books data with real manga content
        const books = [
            {
                id: 1,
                title: "Naruto Shippuden Season 6",
                author: "Masashi Kishimoto",
                category: "anime",
                description: "The story of Naruto Uzumaki on his journey to become the Seventh Hokage, facing new challenges and powerful enemies in the ninja world",
                pages: 5,
                coverImage: "00f993fde8debed82a8d401b69fe01df.jpg",
                content: [
                    {
                        title: "Naruto's Return",
                        description: "After training with Jiraiya, Naruto returns to Konoha stronger than before",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 245: Homecoming</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 245</div>
                        <div class="book-description">
                            <strong>Book Description:</strong> The story of Naruto Uzumaki on his journey to become the Seventh Hokage, facing new challenges and powerful enemies in the ninja world.
                        </div>
                        <p>After two and a half years of training with Jiraiya, Naruto returns to the Village Hidden in the Leaves (Konoha). He notices slight changes in the village, especially Tsunade's face carved on the Hokage Mountain. Naruto meets Sakura and Konohamaru, and everyone notices how Naruto has grown and become more mature.</p>
                        <p>Sakura asks Naruto: "Do I look like a woman now?" Naruto replies: "No, you're still the same!" which angers her and she hits him hard. Jiraiya is surprised by Sakura's strength.</p>
                        <p>Tsunade asks Naruto and Sakura to test their new strength in a confrontation against Kakashi.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 245</p>`
                    },
                    {
                        title: "Team 7 Test",
                        description: "A match between Team 7 and Kakashi to test their progress",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 246: The New Test</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 246</div>
                        <p>In the training ground, the fight between Team 7 and Kakashi begins. Kakashi looks comfortable and challenges the two: "Show me what you've learned during these two years."</p>
                        <p>Naruto starts attacking using the Shadow Clone technique. But Kakashi easily dodges the attacks. Then Naruto decides to use a new technique he learned: the Rasengan!</p>
                        <p>While Sakura focuses on developing her medical skills and physical strength, Naruto shows his ability to produce the Rasengan with one hand.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 246</p>`
                    },
                    {
                        title: "The New Rasengan",
                        description: "Naruto shows his new abilities with the Rasengan",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 247: The Improved Rasengan</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 247</div>
                        <p>Naruto creates a very large Rasengan and directs it towards Kakashi. But Kakashi uses the Mud Wall technique to avoid the attack.</p>
                        <p>Naruto discovers that Kakashi put a mark on him during the attack. Naruto asks: "When did you do that?" Kakashi replies: "When you were busy attacking, I put an explosive tag on your back."</p>
                        <p>Naruto and Sakura decide to work together. Sakura starts attacking Kakashi with great force that breaks the ground. Kakashi is impressed: "Your physical strength has become truly amazing, Sakura!".</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 247</p>`
                    },
                    {
                        title: "Team Cooperation",
                        description: "Naruto and Sakura cooperate against Kakashi",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 248: Deadly Cooperation</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 248</div>
                        <p>Sakura uses her medical skills to deliver precise blows. While Naruto plans a trick using his shadows. The plan seems to work and Kakashi is trapped between Naruto and Sakura.</p>
                        <p>Suddenly, Kakashi appears behind them. The one they trapped was just a clone. Kakashi tells them that the test is over and they have succeeded: "You've become strong enough to protect Sasuke."</p>
                        <p>Kakashi reveals that if they continued fighting they might have defeated him. Then he tells them about a new mission: Rescue the Kazekage Gaara from the Sand Village who was kidnapped by Akatsuki.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 248</p>`
                    },
                    {
                        title: "Gaara Rescue Mission",
                        description: "Team 7 sets out to rescue Gaara",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">Chapter 249: Rescue the Kazekage</div>
                        <div class="chapter-info">Source: Naruto Manga Chapter 249</div>
                        <p>Team 7 sets out on their mission to rescue Gaara. On the way, Kakashi explains that Akatsuki is pursuing "Jinchuriki" - bearers of the tailed beasts, like Naruto and Gaara.</p>
                        <p>The team arrives at the Sand Village to find that Gaara has been taken to the Akatsuki hideout. Temari, Gaara's sister, tells them that he sacrificed himself to protect the village.</p>
                        <p>Team 7 decides to pursue Akatsuki with some Sand ninjas to rescue Gaara before they extract his tailed beast, Shukaku.</p>
                        <p class="source-reference">Source: Naruto Manga Chapter 249</p>`
                    }
                ]
            },
            {
                id: 2,
                title: "Attack on Titan Season 4",
                author: "Hajime Isayama",
                category: "anime",
                description: "Continuation of the epic saga where the secrets of the walls and titans are revealed",
                pages: 5,
                coverImage: "f13da44847f5c86cef64753ac9da73d5.jpg",
                content: [
                    {
                        title: "The Other Side of the Sea",
                        description: "Discovering new lands beyond the walls and the horrifying truth",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 91: The Truth Behind the Walls</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 91</div>
                        <div class="book-description">
                            <strong>Book Description:</strong> Continuation of the epic saga where the secrets of the walls and titans are revealed.
                        </div>
                        <p>After discovering the basement in Eren's house, Eren, Mikasa, and Armin uncover the terrifying truth about the world beyond the walls. They learn that humanity outside the walls lives in advanced technological development, and considers the wall inhabitants "devils" because of their ability to transform into titans.</p>
                        <p>Eren discovers that his father, Grisha, came from outside the walls, and that he transferred the power of the Attack Titan to him before his death. He also discovers that the Eldian people (his ancestors) are the ones who created the titans and used them to control the world.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 91</p>`
                    },
                    {
                        title: "Enemy Territory",
                        description: "Eren and his companions in Marley territory",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 92: In Enemy Territory</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 92</div>
                        <p>Four years after discovering the truth, Eren and his companions travel to Marley territory disguised. They witness the persecution of the Eldian people in ghetto neighborhoods, and hear a speech by Marley's military commander, Calvi, who announces that it's time to retrieve the "Founding Titan" from Paradis Island.</p>
                        <p>Eren watches a military show where Eldian children are trained to become "Titan Shifters" for Marley. Among them is Reiner, his former comrade in the Survey Corps, who is now working as a spy for Paradis Island.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 92</p>`
                    },
                    {
                        title: "Liberio Attack",
                          description: "The beginning of the attack on Marley",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 93: Liberio Attack</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 93</div>
                        <p>During the celebration of granting the Armored Titan power to "Porco," Eren and his team attack the city of Liberio in Marley. Eren transforms into his Attack Titan and attacks the building where Marley's leaders are located.</p>
                        <p>Mikasa and Armin appear with members of the Survey Corps to help Eren. Armin transforms into the Colossal Titan and destroys Marley's naval fleet.</p>
                        <p>The team specifically targets Marley's Titan Shifters, including Porco who just received the Armored Titan.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 93</p>`
                    },
                    {
                        title: "Battle of Liberio",
                        description: "The epic confrontation in Liberio",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 94: Battle of the Titans</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 94</div>
                        <p>A huge battle erupts in the streets of Liberio between Titan Shifters from Paradis Island and Marley. Eren faces Porco (bearer of the Armored Titan) and Porco shows amazing skill in controlling the Armored Titan despite having just received the power.</p>
                        <p>Zeke (bearer of the Beast Titan) joins the battle and uses his voice to turn the Eldians in the ghetto into titans. But Hange and other soldiers from Paradis Island prevent this catastrophe.</p>
                        <p>During the battle, Reiner recognizes Eren and is shocked by his transformation into an aggressive character.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 94</p>`
                    },
                    {
                        title: "Battle Aftermath",
                        description: "The tragic results of the attack on Liberio",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">Chapter 95: Fall of the War Hammer Titan</div>
                        <div class="chapter-info">Source: Attack on Titan Manga Chapter 95</div>
                        <p>Eren succeeds in capturing Zeke, the bearer of the Beast Titan, and swallows him to gain his power. Meanwhile, Porco (Armored Titan) continues to fight but suffers a crushing defeat from Mikasa who destroys his armor using advanced machine guns.</p>
                        <p>Armin (Colossal Titan) destroys most of Liberio city, resulting in thousands of casualties. Eren declares that their goal is to destroy the outside world to protect Paradis Island.</p>
                        <p>The Survey Corps withdraws after achieving their goals, leaving behind a destroyed city and the Marleyan people in shock at the power of Paradis Island.</p>
                        <p class="source-reference">Source: Attack on Titan Manga Chapter 95</p>`
                    }
                ]
            },
            {
                id: 3,
                title: "قصر الشوق",
                author: "Naguib Mahfouz",
                category: "classic",
                description: "The second book in the Cairo Trilogy, following the lives of the Abd al-Jawad family during the British occupation of Egypt",
                pages: 5,
                coverImage: "ok.jpg",
                content: [
                    {
                        title: "Family Secrets",
                        description: "The Abd al-Jawad family faces new challenges",
                        image: "ok.jpg",
                        text: `<div class="episode-title">Chapter 1: The Patriarch's Return</div>
                        <div class="book-description">
                            <strong>Book Description:</strong> The second book in the Cairo Trilogy, following the lives of the Abd al-Jawad family during the British occupation of Egypt.
                        </div>
                        <p>Al-Sayyid Ahmad Abd al-Jawad returns home after a long journey to find his family in turmoil. His wife, Amina, anxiously awaits his return, while his children each face their own struggles. Kamal, the youngest son, struggles with his education and identity crisis.</p>
                        <p>Yasin, the eldest son, continues his reckless behavior and scandalous affairs. Khadija, the eldest daughter, struggles with her marriage to Khalil Shawkat. Aisha, the beautiful daughter, faces the challenges of motherhood and her husband's neglect.</p>
                        <p class="source-reference">Source: Palace of Desire by Naguib Mahfouz</p>`
                    },
                    {
                        title: "Political Turmoil",
                        description: "The family faces the impact of political changes",
                        image: "ok.jpg",
                        text: `<div class="episode-title">Chapter 2: Winds of Change</div>
                        <p>The year is 1924, and Egypt is undergoing significant political changes. The Wafd Party leads the nationalist movement against British occupation. Kamal becomes increasingly involved in political activism, much to his father's disapproval.</p>
                        <p>Al-Sayyid Ahmad, once a staunch supporter of the monarchy, finds himself conflicted as he witnesses the growing nationalist sentiment. His business suffers due to the political instability, and he struggles to maintain his authority within the family.</p>
                        <p class="source-reference">Source: Palace of Desire by Naguib Mahfouz</p>`
                    },
                    {
                        title: "Love and Loss",
                        description: "Romantic entanglements and heartbreaks",
                        image: "ok.jpg",
                        text: `<div class="episode-title">Chapter 3: Affairs of the Heart</div>
                        <p>Yasin falls in love with Zannuba, a singer at the bar he frequents. Despite his father's disapproval and the scandal it causes, he pursues the relationship. His marriage to Zaynab deteriorates further as he neglects his family responsibilities.</p>
                        <p>Kamal develops an unrequited love for Aida Shaddad, a girl from a wealthy family. His feelings for her become an obsession that affects his studies and mental health. He struggles with his self-esteem and questions his place in the changing world.</p>
                        <p class="source-reference">Source: Palace of Desire by Naguib Mahfouz</p>`
                    },
                    {
                        title: "Family Crisis",
                        description: "The Abd al-Jawad family faces a major crisis",
                        image: "ok.jpg",
                        text: `<div class="episode-title">Chapter 4: The Patriarch's Illness</div>
                        <p>Al-Sayyid Ahmad suffers a stroke that leaves him partially paralyzed. The family is thrown into chaos as the once powerful patriarch becomes dependent on others. His illness forces him to confront his mortality and the consequences of his authoritarian parenting.</p>
                        <p>Amina takes charge of the household, showing unexpected strength and resilience. The children rally around their father, setting aside their differences in this time of crisis. Yasin steps up to manage the family business, surprising everyone with his newfound responsibility.</p>
                        <p class="source-reference">Source: Palace of Desire by Naguib Mahfouz</p>`
                    },
                    {
                        title: "New Beginnings",
                        description: "The family adapts to a new reality",
                        image: "ok.jpg",
                        text: `<div class="episode-title">Chapter 5: Changing Times</div>
                        <p>As Al-Sayyid Ahmad slowly recovers, the family adjusts to their new roles. Kamal graduates from teacher training college and begins his career, finally finding purpose beyond his unrequited love. He becomes involved in intellectual circles, discussing philosophy and politics.</p>
                        <p>Aisha faces tragedy when her children fall ill during an epidemic. Her strength during this difficult time transforms her from the fragile beauty she once was. The novel ends with the family gathering for a rare moment of unity, facing an uncertain future but strengthened by their bonds.</p>
                        <p class="source-reference">Source: Palace of Desire by Naguib Mahfouz</p>`
                    }
                ]
            }
        ];
        
        // DOM elements
        const transferBtn = document.getElementById('transfer-btn');
        const exitBtn = document.getElementById('exit-btn');
        const logo = document.getElementById('logo');
        const animeBooksGrid = document.getElementById('anime-books-grid');
        const classicBooksGrid = document.getElementById('classic-books-grid');
        const booksSection = document.getElementById('books-section');
        const readingContainer = document.getElementById('reading-container');
        const readingTitle = document.getElementById('reading-title');
        const readingContent = document.getElementById('reading-content');
        const backToBooksBtn = document.getElementById('back-to-books');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const pageIndicator = document.getElementById('page-indicator');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const settingsMenu = document.getElementById('settings-menu');
        const loadingSpinner = document.getElementById('loading-spinner');
        const animeSection = document.getElementById('anime-section');
        const classicSection = document.getElementById('classic-section');
        const backToCategoriesBtn = document.getElementById('back-to-categories');
        
        // App state
        let currentBook = null;
        let currentPage = 0;
        let currentTheme = 'naruto';
        let currentView = 'all'; // 'all', 'anime', 'classic', or 'search'
        
        // Initialize site
        function initSite() {
            // Display books by category
            renderBooksByCategory();
            
            // Add event listeners
            transferBtn.addEventListener('click', toggleSettingsMenu);
            exitBtn.addEventListener('click', goToHomePage);
            logo.addEventListener('dblclick', refreshPage);
            
            // Reading section events
            backToBooksBtn.addEventListener('click', showBooksView);
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);
            
            // Search
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            
            // Close settings menu when clicking outside
            document.addEventListener('click', function(e) {
                if (settingsMenu && !settingsMenu.contains(e.target) && !transferBtn.contains(e.target)) {
                    settingsMenu.classList.remove('active');
                }
            });
            
            // Transfer to section
            document.querySelectorAll('.social-link[data-section]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    filterBooks(section);
                    settingsMenu.classList.remove('active');
                });
            });
            
            // View more buttons
            document.querySelectorAll('.view-more-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    filterBooks(category);
                });
            });
            
            // Back to categories button
            backToCategoriesBtn.addEventListener('click', function() {
                currentView = 'all';
                renderBooksByCategory();
                backToCategoriesBtn.style.display = 'none';
                animeSection.style.display = 'block';
                classicSection.style.display = 'block';
            });
        }
        
        // Display books by category
        function renderBooksByCategory() {
            const animeBooks = books.filter(book => book.category === 'anime');
            const classicBooks = books.filter(book => book.category === 'classic');
            
            renderBooks(animeBooks, animeBooksGrid);
            renderBooks(classicBooks, classicBooksGrid);
        }
        
        // Display books
        function renderBooks(booksArray, container) {
            container.innerHTML = '';
            
            if (booksArray.length === 0) {
                container.innerHTML = '<p class="no-results">No results found</p>';
                return;
            }
            
            booksArray.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.dataset.id = book.id;
                bookCard.dataset.category = book.category;
                bookCard.innerHTML = `
                    <div class="book-cover ${book.id === 1 ? 'naruto' : book.id === 2 ? 'aot' : 'classic'}">
                        <img src="${book.coverImage}" alt="${book.title}" class="cover-image">
                    </div>
                    <div class="book-title">${book.title}</div>
                `;
                
                bookCard.addEventListener('click', () => {
                    openBook(book);
                });
                
                container.appendChild(bookCard);
            });
        }
        
        // Open book
        function openBook(book) {
            // Show loading indicator
            loadingSpinner.style.display = 'block';
            
            setTimeout(() => {
                currentBook = book;
                currentPage = 0;
                
                // Change theme based on book
                if (book.id === 1) currentTheme = 'naruto';
                else if (book.id === 2) currentTheme = 'aot';
                else currentTheme = 'classic';
                
                document.body.className = '';
                if (currentTheme !== 'naruto') {
                    document.body.classList.add(`${currentTheme}-theme`);
                }
                
                updateReadingView();
                
                // Show reading section and hide library section
                booksSection.style.display = 'none';
                readingContainer.style.display = 'block';
                
                // Hide loading indicator
                loadingSpinner.style.display = 'none';
            }, 500);
        }
        
        // Update reading view
        function updateReadingView() {
            // Update title
            readingTitle.textContent = currentBook.title;
            
            // Update current page content
            renderPageContent();
            
            // Update page indicator
            pageIndicator.textContent = `Page ${currentPage + 1} of ${currentBook.content.length}`;
            
            // Update navigation buttons state
            prevPageBtn.disabled = currentPage <= 0;
            nextPageBtn.disabled = currentPage >= currentBook.content.length - 1;
        }
        
        // Display current page content
        function renderPageContent() {
            const content = currentBook.content[currentPage];
            
            readingContent.innerHTML = `
                <div class="book-meta">
                    <div class="book-author-reading">By: ${currentBook.author}</div>
                </div>
                <div class="page-image-container">
                    <img src="${content.image}" alt="${content.title}" class="page-image">
                </div>
                <div class="page-text">
                    ${content.text}
                </div>
            `;
        }
        
        // Go to previous page
        function goToPrevPage() {
            if (currentPage > 0) {
                currentPage--;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // Go to next page
        function goToNextPage() {
            if (currentPage < currentBook.content.length - 1) {
                currentPage++;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // Return to books view
        function showBooksView() {
            booksSection.style.display = 'block';
            readingContainer.style.display = 'none';
            
            // Reset theme
            document.body.className = '';
            
            // Reload books based on current view
            if (currentView === 'all') {
                renderBooksByCategory();
                animeSection.style.display = 'block';
                classicSection.style.display = 'block';
                backToCategoriesBtn.style.display = 'none';
            } else if (currentView === 'anime') {
                filterBooks('anime');
            } else if (currentView === 'classic') {
                filterBooks('classic');
            } else if (currentView === 'search') {
                performSearch();
            }
        }
        
        // Toggle settings menu
        function toggleSettingsMenu(e) {
            e.stopPropagation();
            settingsMenu.classList.toggle('active');
        }
        
        // Go to home page
        function goToHomePage() {
            window.location.href = 'index.html';
        }
        
        // Refresh page
        function refreshPage() {
            window.location.reload();
        }
        
        // Filter books by category
        function filterBooks(category) {
            // Update current view state
            currentView = category;
            
            // Show back to categories button
            backToCategoriesBtn.style.display = 'block';
            
            // Hide all category sections initially
            animeSection.style.display = 'none';
            classicSection.style.display = 'none';
            
            if (category === 'all') {
                renderBooksByCategory();
                animeSection.style.display = 'block';
                classicSection.style.display = 'block';
                backToCategoriesBtn.style.display = 'none';
            } else {
                const filteredBooks = books.filter(book => book.category === category);
                
                // Show the appropriate section
                if (category === 'anime') {
                    renderBooks(filteredBooks, animeBooksGrid);
                    animeSection.style.display = 'block';
                } else if (category === 'classic') {
                    renderBooks(filteredBooks, classicBooksGrid);
                    classicSection.style.display = 'block';
                }
            }
        }
        
        // Perform search with better matching
        function performSearch() {
            currentView = 'search';
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                currentView = 'all';
                renderBooksByCategory();
                animeSection.style.display = 'block';
                classicSection.style.display = 'block';
                backToCategoriesBtn.style.display = 'none';
                return;
            }
            
            // Show back to categories button
            backToCategoriesBtn.style.display = 'block';
            
            // Hide category sections during search
            animeSection.style.display = 'none';
            classicSection.style.display = 'none';
            
            // Create search aliases for categories
            const searchAliases = {
                'anime': ['anime', 'أنمي', 'انمي', 'anim', 'manga', 'مانجا', 'مانغا'],
                'classic': ['classic', 'كلاسيك', 'روايات', 'novel', 'رواية', 'literature', 'أدب']
            };
            
            // Check if search term matches any category alias
            let categoryMatch = null;
            for (const category in searchAliases) {
                if (searchAliases[category].includes(searchTerm)) {
                    categoryMatch = category;
                    break;
                }
            }
            
            let results = [];
            
            if (categoryMatch) {
                // If search term matches a category, filter by that category
                results = books.filter(book => book.category === categoryMatch);
                
                // Show the appropriate section
                if (categoryMatch === 'anime') {
                    animeSection.style.display = 'block';
                } else if (categoryMatch === 'classic') {
                    classicSection.style.display = 'block';
                }
            } else {
                // Otherwise, perform regular search
                results = books.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) || 
                    book.author.toLowerCase().includes(searchTerm) ||
                    book.description.toLowerCase().includes(searchTerm) ||
                    book.category.toLowerCase().includes(searchTerm)
                );
                
                // Show results in anime section grid
                animeSection.style.display = 'block';
            }
            
            renderBooks(results, animeBooksGrid);
        }
        
        // Initialize site when DOM is loaded
        document.addEventListener('DOMContentLoaded', initSite);
    </script>
</body>
</html>