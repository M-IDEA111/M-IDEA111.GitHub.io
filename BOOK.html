<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M IDEA Book - مكتبة الأنمي الموسمية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #03ffba;
            --primary-color-light: #03ffed;
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #f5f5f5;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            --naruto-orange: #ff7700;
            --naruto-blue: #0066cc;
            --aot-red: #c70000;
            --aot-dark: #333333;
            --naruto-bg: linear-gradient(135deg, #1a1a1a, #0d0d0d);
            --aot-bg: linear-gradient(135deg, #0a0a0a, #121212);
        }
        
        body {
            background: var(--naruto-bg);
            color: var(--dark-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-attachment: fixed;
            padding-top: 140px;
            transition: background 0.5s ease;
        }
        
        body.aot-theme {
            background: var(--aot-bg);
        }
        
        /* Header Styles */
        header {
            background: rgba(0, 0, 0, 0.85);
            padding: 0.8rem 1.5rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-bottom: 2px solid var(--primary-color);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .header-bottom {
            width: 100%;
            max-width: 600px;
        }
        
        .logo-img {
            height: 50px;
            transition: transform 0.3s;
            filter: drop-shadow(0 0 10px var(--primary-color-light));
        }
        
        .logo-img:hover {
            transform: scale(1.05);
        }
        
        .search-bar {
            width: 100%;
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 0 15px rgba(3, 255, 186, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
            50% { box-shadow: 0 0 20px rgba(3, 255, 186, 0.5); }
            100% { box-shadow: 0 0 10px rgba(3, 255, 186, 0.3); }
        }
        
        .search-bar input {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background-color: rgba(0, 0, 0, 0.5);
            color: var(--dark-text);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }
        
        .search-bar input:focus {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .search-bar button {
            padding: 0 22px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .search-bar button:hover {
            background: linear-gradient(90deg, var(--primary-color-light), var(--primary-color));
            transform: scale(1.05);
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 1.4rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .icon-btn:hover {
            background-color: rgba(3, 255, 186, 0.1);
            transform: rotate(10deg);
            color: var(--primary-color-light);
        }
        
        .icon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(3, 255, 186, 0.2) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .icon-btn:hover::before {
            opacity: 1;
        }
        
        /* Settings Menu */
        .settings-menu {
            position: fixed;
            top: 90px;
            right: 20px;
            background-color: #2c2c2c;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            width: 300px;
            padding: 1.5rem;
            display: none;
            z-index: 1000;
            border: 1px solid rgba(3, 255, 186, 0.3);
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .settings-menu.active {
            display: block;
        }
        
        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateY(-20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .settings-section {
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .settings-title {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .social-links {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .social-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: var(--border-radius);
            color: var(--dark-text);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            background-color: var(--primary-color);
            color: #000;
        }
        
        .social-link i {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .social-link:hover i {
            color: #000;
        }
        
        /* Navigation - تحت شريط البحث */
        nav {
            background: rgba(0, 0, 0, 0.8);
            padding: 0.8rem 0;
            position: sticky;
            top: 140px;
            z-index: 999;
            border-bottom: 1px solid rgba(3, 255, 186, 0.2);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .category-btn {
            background: none;
            border: none;
            color: #aaa;
            padding: 8px 0;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            z-index: 1;
            font-weight: 600;
        }
        
        .category-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            transition: width 0.4s ease;
            z-index: -1;
        }
        
        .category-btn:hover, .category-btn.active {
            color: var(--primary-color);
        }
        
        .category-btn:hover::after, .category-btn.active::after {
            width: 100%;
        }
        
        /* Main Content */
        main {
            padding: 1.5rem;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }
        
        .section-title {
            font-size: 1.7rem;
            margin: 1.5rem 0 1rem;
            padding-bottom: 0.4rem;
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(3, 255, 186, 0.5);
        }
        
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .book-card {
            background-color: var(--dark-card);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            border: 1px solid rgba(3, 255, 186, 0.1);
        }
        
        .book-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(3, 255, 186, 0.3);
        }
        
        .book-cover {
            height: 320px;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .book-cover.naruto {
            background: linear-gradient(135deg, var(--naruto-orange), var(--naruto-blue));
        }
        
        .book-cover.aot {
            background: linear-gradient(135deg, var(--aot-red), var(--aot-dark));
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .book-card:hover .cover-image {
            transform: scale(1.05);
        }
        
        .book-info {
            padding: 1rem;
        }
        
        .book-title {
            font-size: 1.2rem;
            margin-bottom: 0.4rem;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .book-author {
            color: #aaa;
            font-size: 0.85rem;
            margin-bottom: 0.4rem;
        }
        
        .book-description {
            color: #ccc;
            font-size: 0.85rem;
            line-height: 1.6;
            margin-bottom: 0.6rem;
        }
        
        .book-pages {
            display: inline-block;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            margin-top: 0.3rem;
            font-weight: bold;
        }
        
        /* Reading Section */
        .reading-container {
            display: none;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: 1px solid rgba(3, 255, 186, 0.2);
        }
        
        .reading-header {
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid var(--primary-color);
        }
        
        .reading-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }
        
        .back-to-books {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }
        
        .back-to-books:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(3, 255, 186, 0.4);
        }
        
        .reading-content {
            padding: 1.5rem;
            line-height: 1.8;
            font-size: 1rem;
            min-height: 400px;
            background: rgba(30, 30, 30, 0.8);
        }
        
        .page-image-container {
            width: 100%;
            max-height: 380px;
            overflow: hidden;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .page-image {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        
        .page-text {
            margin-top: 15px;
        }
        
        .page-text p {
            margin-bottom: 12px;
            text-align: justify;
        }
        
        .episode-title {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
            border-bottom: 1px solid var(--primary-color-light);
            padding-bottom: 0.4rem;
        }
        
        .character {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .naruto-character {
            background: rgba(255, 119, 0, 0.2);
            color: var(--naruto-orange);
        }
        
        .aot-character {
            background: rgba(199, 0, 0, 0.2);
            color: var(--aot-red);
        }
        
        .chapter-info {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px 12px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.85rem;
            color: var(--primary-color-light);
        }
        
        .page-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.7);
            border-top: 2px solid var(--primary-color);
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .nav-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .nav-btn:disabled:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--dark-text);
        }
        
        .page-indicator {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--dark-text);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.3s;
            z-index: 10;
            font-size: 0.9rem;
        }
        
        .bottom-back-btn:hover {
            background: linear-gradient(90deg, var(--primary-color), var(--primary-color-light));
            color: #000;
        }
        
        /* Responsive Design - تحسينات للشاشات الصغيرة */
        @media (max-width: 768px) {
            body {
                padding-top: 160px;
            }
            
            header {
                padding: 8px 10px;
            }
            
            .logo-img {
                height: 40px;
            }
            
            .icon-btn {
                width: 38px;
                height: 38px;
                font-size: 1.2rem;
            }
            
            nav {
                top: 128px;
                padding: 0.5rem 0;
            }
            
            .section-title {
                font-size: 1.5rem;
                margin: 1.2rem 0 0.8rem;
            }
            
            .books-grid {
                grid-template-columns: 1fr;
                gap: 1.2rem;
                margin-bottom: 1.5rem;
            }
            
            .book-cover {
                height: 280px;
            }
            
            .settings-menu {
                top: 110px;
                right: 10px;
                width: 90%;
            }
            
            .header-top {
                margin-bottom: 5px;
            }
            
            .categories {
                gap: 1rem;
            }
            
            .category-btn {
                font-size: 1rem;
                padding: 6px 0;
            }
            
            .search-bar input {
                padding: 12px 16px;
            }
            
            .search-bar button {
                padding: 0 18px;
            }
        }
        
        @media (min-width: 769px) {
            .header-top {
                max-width: 1200px;
                width: 100%;
            }
            .header-bottom {
                max-width: 600px;
                margin-top: 10px;
            }
            
            nav {
                top: 138px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding-top: 150px;
            }
            
            .logo-img {
                height: 35px;
            }
            
            .icon-btn {
                width: 35px;
                height: 35px;
                font-size: 1.1rem;
            }
            
            .categories {
                gap: 0.8rem;
            }
            
            .category-btn {
                font-size: 0.9rem;
            }
            
            nav {
                top: 118px;
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .book-cover {
                height: 250px;
            }
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2000;
        }
        
            .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(3, 255, 186, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .source-reference {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Header with Logo, Search, Settings and Exit Icon -->
    <header>
        <div class="header-top">
            <!-- أيقونة الإعدادات على اليسار -->
            <div class="header-icons">
                <button class="icon-btn" id="settings-btn">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
            
            <!-- الشعار في المنتصف -->
            <img src="Picsart_25-07-23_05-13-20-665.png" alt="M IDEA Book Logo" class="logo-img" id="logo">
            
            <!-- أيقونة الخروج على اليمين -->
            <div class="header-icons">
                <button class="icon-btn" id="exit-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        
        <!-- شريط البحث -->
        <div class="header-bottom">
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="ابحث في المكتبة...">
                <button id="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </header>
    
    <!-- قائمة الإعدادات -->
    <div class="settings-menu" id="settings-menu">
        <div class="settings-section">
            <h3 class="settings-title"><i class="fas fa-link"></i> وسائل التواصل</h3>
            <div class="social-links">
                <a href="https://discord.gg/WDrpNjfA" target="_blank" class="social-link">
                    <i class="fab fa-discord"></i>
                    <span>انضم إلى مجتمعنا على الديسكورد</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Navigation - تحت شريط البحث -->
    <nav>
        <div class="categories">
            <button class="category-btn active" data-category="all">الكل</button>
            <button class="category-btn" data-category="anime">أنمي</button>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main>
        <!-- Books Section -->
        <div class="books-section" id="books-section">
            <h2 class="section-title"> </h2>
            <div class="books-grid" id="books-grid">
                <!-- سيتم تعبئة الكتب بواسطة الجافاسكريبت -->
            </div>
        </div>
        
        <!-- Reading Section -->
        <div class="reading-container" id="reading-container">
            <div class="reading-header">
                <h3 class="reading-title" id="reading-title"></h3>
                <button class="back-to-books" id="back-to-books">
                    <i class="fas fa-arrow-left"></i> العودة إلى المكتبة
                </button>
            </div>
            
            <div class="reading-content" id="reading-content">
                <!-- محتوى الصفحة الحالية -->
            </div>
            
            <div class="page-navigation">
                <button class="nav-btn" id="prev-page" disabled>
                    <i class="fas fa-arrow-right"></i> الصفحة السابقة
                </button>
                
                <div class="page-indicator" id="page-indicator">الصفحة 1 من 5</div>
                
                <button class="nav-btn" id="next-page">
                    الصفحة التالية <i class="fas fa-arrow-left"></i>
                </button>
            </div>
        </div>
    </main>
    
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
    </div>
    
    <script>
        // بيانات الكتب (الموسمين) بمحتوى حقيقي من المانجا
        const books = [
            {
                id: 1,
                title: "ناروتو شيبودن الموسم السادس",
                author: "ماساشي كيشيموتو",
                category: "anime",
                description: "قصة ناروتو أوزوماكي في رحلته ليصبح الهوكاجي السابع، يواجه تحديات جديدة وأعداء أقوياء في عالم النينجا",
                pages: 5,
                coverImage: "00f993fde8debed82a8d401b69fe01df.jpg",
                content: [
                    {
                        title: "عودة ناروتو",
                        description: "بعد تدريبه مع جيرايا، يعود ناروتو إلى كونوها أقوى من ذي قبل",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">الفصل 245: عودة للوطن</div>
                        <div class="chapter-info">مصدر: مانجا ناروتو الفصل 245</div>
                        <p>بعد عامين ونصف من التدريب مع جيرايا، يعود ناروتو إلى قرية الورق (كونوها). يلاحظ التغييرات الطفيفة في القرية، خاصة وجه تسونادي المنحوت على جبل الهوكاجي. يلتقي ناروتو بساكورا وكونوهامارو، ويلاحظ الجميع كيف كبر ناروتو وأصبح أكثر نضجًا.</p>
                        <p>ساكورا تسأل ناروتو: "هل أبدو كامرأة الآن؟" فيرد ناروتو: "لا، ما زلتِ كما كنتِ!" مما يغضبها وتضربه بقوة. يتفاجأ جيرايا من قوة ساكورا.</p>
                        <p>تطلب تسونادي من ناروتو وساكورا اختبار قوتهما الجديدة في مواجهة كاكاشي.</p>
                        <p class="source-reference">المصدر: مانجا ناروتو الفصل 245</p>`
                    },
                    {
                        title: "اختبار الفريق السابع",
                        description: "مواجهة بين الفريق السابع وكاكاشي لاختبار تقدمهم",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">الفصل 246: الاختبار الجديد</div>
                        <div class="chapter-info">مصدر: مانجا ناروتو الفصل 246</div>
                        <p>في ساحة التدريب، يبدأ القتال بين الفريق السابع وكاكاشي. كاكاشي يبدو مرتاحًا ويتحدى الاثنين: "أروني ما تعلمتموه خلال هذه السنتين".</p>
                        <p>يبدأ ناروتو بالهجوم باستخدام تقنية الظل المتعدد. لكن كاكاشي يتفادى الهجمات بسهولة. ثم يقرر ناروتو استخدام تقنية جديدة تعلمها: الراسينغان!</p>
                        <p>بينما تركز ساكورا على تطوير مهاراتها الطبية والقوة الجسدية، يظهر ناروتو قدرته على إنتاج الراسينغان بيد واحدة.</p>
                        <p class="source-reference">المصدر: مانجا ناروتو الفصل 246</p>`
                    },
                    {
                        title: "الراسينغان الجديد",
                        description: "ناروتو يظهر قدراته الجديدة مع الراسينغان",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">الفصل 247: الراسينغان المتطور</div>
                        <div class="chapter-info">مصدر: مانجا ناروتو الفصل 247</div>
                        <p>يخلق ناروتو راسينغان كبيرًا جدًا ويوجهه نحو كاكاشي. لكن كاكاشي يستخدم تقنية الأرضية الطينية لتجنب الهجوم.</p>
                        <p>يكتشف ناروتو أن كاكاشي وضع علامة عليه أثناء الهجوم. يسأل ناروتو: "متى فعلت ذلك؟" فيجيب كاكاشي: "عندما كنت منشغلًا بالهجوم، وضعت صاعقًا على ظهرك".</p>
                        <p>يقرر ناروتو وساكورا العمل معًا. تبدأ ساكورا بالهجوم على كاكاشي بقوة كبيرة تكسر الأرض. كاكاشي منبهر: "قوتك الجسدية أصبحت رهيبة حقًا يا ساكورا!".</p>
                        <p class="source-reference">المصدر: مانجا ناروتو الفصل 247</p>`
                    },
                    {
                        title: "تعاون الفريق",
                        description: "ناروتو وساكورا يتعاونان ضد كاكاشي",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">الفصل 248: التعاون القاتل</div>
                        <div class="chapter-info">مصدر: مانجا ناروتو الفصل 248</div>
                        <p>تستخدم ساكورا مهاراتها الطبية لتوجيه ضربات دقيقة. بينما يخطط ناروتو لخدعة باستخدام ظلاله. يبدو أن الخطة تنجح وكاكاشي محاصر بين ناروتو وساكورا.</p>
                        <p>فجأة، يظهر كاكاشي خلفهم. كان الذي حاصروه مجرد استنساخ. يخبرهم كاكاشي أن الاختبار انتهى وهم نجحوا: "لقد أصبحتما قويان بما يكفي لحماية ساسكي".</p>
                        <p>يكشف كاكاشي أنهم لو استمروا في القتال لربما هزماه. ثم يخبرهم بمهمة جديدة: إنقاذ القائد غاارا من قرية الرمال الذي اختطفه الأكاتسكي.</p>
                        <p class="source-reference">المصدر: مانجا ناروتو الفصل 248</p>`
                    },
                    {
                        title: "مهمة إنقاذ غاارا",
                        description: "الفريق السابع ينطلق لإنقاذ غاارا",
                        image: "00f993fde8debed82a8d401b69fe01df.jpg",
                        text: `<div class="episode-title">الفصل 249: إنقاذ الكازيكاجي</div>
                        <div class="chapter-info">مصدر: مانجا ناروتو الفصل 249</div>
                        <p>ينطلق الفريق السابع في مهمتهم لإنقاذ غاارا. أثناء الطريق، يشرح كاكاشي أن الأكاتسكي يطاردون "جينشوريكي" - حاملي الوحوش الذيلية، مثل ناروتو وغاارا.</p>
                        <p>يصل الفريق إلى قرية الرمال ليجدوا أن غاارا قد أخذ إلى مخبأ الأكاتسكي. تيماي، شقيقة غاارا، تخبرهم بأنه ضحى بنفسه لحماية القرية.</p>
                        <p>يقرر الفريق السابع مع بعض نينجا الرمال ملاحقة الأكاتسكي وإنقاذ غاارا قبل أن يستخرجوا وحشه الذيلية، شوكاكو.</p>
                        <p class="source-reference">المصدر: مانجا ناروتو الفصل 249</p>`
                    }
                ]
            },
            {
                id: 2,
                title: "هجوم العمالقة الموسم الرابع",
                author: "هاجيمي إيساياما",
                category: "anime",
                description: "استكمال الملحمة الملحمية حيث تكشف أسرار الجدران والعمالقة",
                pages: 5,
                coverImage: "f13da44847f5c86cef64753ac9da73d5.jpg",
                content: [
                    {
                        title: "البحر الآخر",
                        description: "اكتشاف أراضي جديدة خارج الجدران والحقيقة المروعة",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">الفصل 91: الحقيقة وراء الجدران</div>
                        <div class="chapter-info">مصدر: مانجا هجوم العمالقة الفصل 91</div>
                        <p>بعد اكتشاف القبو في منزل إيرين، يكتشف إيرين وميكاسا وأرمين الحقيقة المخيفة عن العالم خارج الجدران. يتعلمون أن البشرية خارج الجدران تعيش في تطور تكنولوجي متقدم، وتعتبر سكان الجدران "شياطين" بسبب قدراتهم على التحول إلى عمالقة.</p>
                        <p>إيرين يكتشف أن والده، غريشا، أتى من خارج الجدران، وأنه نقل له قوة العمالقة المهاجم قبل موته. كما يكتشف أن شعب إلديا (أسلافه) هم من خلقوا العمالقة واستخدموهم للسيطرة على العالم.</p>
                        <p class="source-reference">المصدر: مانجا هجوم العمالقة الفصل 91</p>`
                    },
                    {
                        title: "أرض الأعداء",
                        description: "إيرين ورفاقه في أراضي مارلي",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">الفصل 92: في أراضي العدو</div>
                        <div class="chapter-info">مصدر: مانجا هجوم العمالقة الفصل 92</div>
                        <p>بعد أربع سنوات من اكتشاف الحقيقة، يسافر إيرين ورفاقه إلى أراضي مارلي متنكرين. يشهدون اضطهاد شعب إلديا في أحياء الجيتو، ويسمعون خطابًا للقائد العسكري في مارلي، كالي، الذي يعلن أن الوقت قد حان لاستعادة "العملاق المؤسس" من جزيرة باراديس.</p>
                        <p>إيرين يشاهد عرضًا عسكريًا حيث يتم تدريب أطفال إلديا ليصبحوا "حاملي العمالقة" لمارلي. من بينهم ريكي، زميله السابق في الفوج الاستكشافي، الذي يعمل الآن جاسوسًا لصالح جزيرة باراديس.</p>
                        <p class="source-reference">المصدر: مانجا هجوم العمالقة الفصل 92</p>`
                    },
                    {
                        title: "هجوم ليبرو",
                        description: "بداية الهجوم على مارلي",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">الفصل 93: هجوم ليبرو</div>
                        <div class="chapter-info">مصدر: مانجا هجوم العمالقة الفصل 93</div>
                        <p>أثناء الاحتفال بمنح قوة العملاق المدرع لـ"بوروتو"، يهاجم إيرين وفريقه مدينة ليبرو في مارلي. إيرين يتحول إلى عملاقه المهاجم ويهاجم المبنى حيث يتواجد قادة مارلي.</p>
                        <p>تظهر ميكاسا وأرمين مع أعضاء الفوج الاستكشافي لمساعدة إيرين. أرمين يتحول إلى العملاق الكولوسال ويدمر الأسطول البحري لمارلي.</p>
                        <p>الفريق يستهدف بشكل خاص حاملي العمالقة في مارلي، بمن فيهم بوروتو الذي حصل للتو على العملاق المدرع.</p>
                        <p class="source-reference">المصدر: مانجا هجوم العمالقة الفصل 93</p>`
                    },
                    {
                        title: "معركة ليبرو",
                        description: "المواجهة الملحمية في ليبرو",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">الفصل 94: معركة العملاقات</div>
                        <div class="chapter-info">مصدر: مانجا هجوم العمالقة الفصل 94</div>
                        <p>تندلع معركة ضخمة في شوارع ليبرو بين حاملي العمالقة من جزيرة باراديس ومارلي. إيرين يواجه بوروتو (حامل العملاق المدرع) وبوروتو يظهر مهارة مذهلة في التحكم بالعملاق المدرع رغم تلقيه القوة للتو.</p>
                        <p>زيك (حامل العملاق الوحشي) ينضم إلى المعركة ويستخدم صوته لتحويل إلديا الجيتو إلى عمالقة. لكن هانجي والجنود الآخرين من جزيرة باراديس يمنعون هذه الكارثة.</p>
                        <p>أثناء المعركة، يتعرف ريكي على إيرين ويصاب بالصدمة من تحوله إلى شخصية عدوانية.</p>
                        <p class="source-reference">المصدر: مانجا هجوم العمالقة الفصل 94</p>`
                    },
                    {
                        title: "نهاية المعركة",
                        description: "النتائج المأساوية للهجوم على ليبرو",
                        image: "f13da44847f5c86cef64753ac9da73d5.jpg",
                        text: `<div class="episode-title">الفصل 95: سقوط العملاق الحربي</div>
                        <div class="chapter-info">مصدر: مانجا هجوم العمالقة الفصل 95</div>
                        <p>إيرين ينجح في أسر زيك، حامل العملاق الوحشي، ويبتلعه ليحصل على قوته. في هذه الأثناء، بوروتو (العملاق المدرع) يواصل القتال لكنه يتعرض لهزيمة ساحقة من قبل ميكاسا التي تدمر درعه باستخدام أسلحة الرشاشات المتطورة.</p>
                        <p>أرمين (العملاق الكولوسال) يدمر معظم مدينة ليبرو، مما يؤدي إلى سقوط آلاف الضحايا. إيرين يعلن أن هدفهم هو تدمير العالم الخارجي لحماية جزيرة باراديس.</p>
                        <p>الفوج الاستكشافي ينسحب بعد تحقيق أهدافهم، تاركين وراءهم مدينة مدمرة وشعب مارلي في حالة ذهول من قوة جزيرة باراديس.</p>
                        <p class="source-reference">المصدر: مانجا هجوم العمالقة الفصل 95</p>`
                    }
                ]
            }
        ];
        
        // عناصر DOM
        const settingsBtn = document.getElementById('settings-btn');
        const exitBtn = document.getElementById('exit-btn');
        const logo = document.getElementById('logo');
        const booksGrid = document.getElementById('books-grid');
        const booksSection = document.getElementById('books-section');
        const readingContainer = document.getElementById('reading-container');
        const readingTitle = document.getElementById('reading-title');
        const readingContent = document.getElementById('reading-content');
        const backToBooksBtn = document.getElementById('back-to-books');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const pageIndicator = document.getElementById('page-indicator');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const settingsMenu = document.getElementById('settings-menu');
        const loadingSpinner = document.getElementById('loading-spinner');
        
        // حالة التطبيق
        let currentBook = null;
        let currentPage = 0;
        let currentTheme = 'naruto';
        
        // تهيئة الموقع
        function initSite() {
            // عرض الكتب
            renderBooks(books);
            
            // إضافة مستمعي الأحداث
            settingsBtn.addEventListener('click', toggleSettingsMenu);
            exitBtn.addEventListener('dblclick', goToHomePage);
            logo.addEventListener('dblclick', refreshPage);
            
            // أحداث قسم القراءة
            backToBooksBtn.addEventListener('click', showBooksView);
            prevPageBtn.addEventListener('click', goToPrevPage);
            nextPageBtn.addEventListener('click', goToNextPage);
            
            // تصفية الفئات
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.dataset.category;
                    filterBooks(category);
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // البحث
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            
            // إغلاق قائمة الإعدادات عند النقر خارجها
            document.addEventListener('click', function(e) {
                if (!settingsMenu.contains(e.target) && !settingsBtn.contains(e.target)) {
                    settingsMenu.classList.remove('active');
                }
            });
        }
        
        // عرض الكتب
        function renderBooks(booksArray) {
            booksGrid.innerHTML = '';
            
            if (booksArray.length === 0) {
                booksGrid.innerHTML = '<p class="no-results">لم يتم العثور على نتائج</p>';
                return;
            }
            booksArray.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.dataset.id = book.id;
                bookCard.dataset.category = book.category;
                bookCard.innerHTML = `
                    <div class="book-cover ${book.id === 1 ? 'naruto' : 'aot'}">
                        <img src="${book.coverImage}" alt="${book.title}" class="cover-image">
                    </div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">${book.author}</p>
                        <p class="book-description">${book.description}</p>
                        <span class="book-pages">${book.pages} صفحات</span>
                    </div>
                `;
                
                bookCard.addEventListener('click', () => {
                    openBook(book);
                });
                
                booksGrid.appendChild(bookCard);
            });
        }
        
        // فتح كتاب
        function openBook(book) {
            // عرض مؤشر التحميل
            loadingSpinner.style.display = 'block';
            
            setTimeout(() => {
                currentBook = book;
                currentPage = 0;
                
                // تغيير السمة حسب الكتاب
                currentTheme = book.id === 1 ? 'naruto' : 'aot';
                document.body.classList.toggle('aot-theme', currentTheme === 'aot');
                
                updateReadingView();
                
                // إظهار قسم القراءة وإخفاء قسم المكتبة
                booksSection.style.display = 'none';
                readingContainer.style.display = 'block';
                
                // إخفاء مؤشر التحميل
                loadingSpinner.style.display = 'none';
            }, 500);
        }
        
        // تحديث واجهة القراءة
        function updateReadingView() {
            // تحديث العنوان
            readingTitle.textContent = currentBook.title;
            
            // تحديث محتوى الصفحة الحالية
            renderPageContent();
            
            // تحديث مؤشر الصفحة
            pageIndicator.textContent = `الصفحة ${currentPage + 1} من ${currentBook.content.length}`;
            
            // تحديث حالة أزرار التنقل
            prevPageBtn.disabled = currentPage <= 0;
            nextPageBtn.disabled = currentPage >= currentBook.content.length - 1;
        }
        
        // عرض محتوى الصفحة الحالية
        function renderPageContent() {
            const content = currentBook.content[currentPage];
            
            readingContent.innerHTML = `
                <div class="page-image-container">
                    <img src="${content.image}" alt="${content.title}" class="page-image">
                </div>
                <div class="page-text">
                    ${content.text}
                </div>
            `;
        }
        
        // الذهاب إلى الصفحة السابقة
        function goToPrevPage() {
            if (currentPage > 0) {
                currentPage--;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // الذهاب إلى الصفحة التالية
        function goToNextPage() {
            if (currentPage < currentBook.content.length - 1) {
                currentPage++;
                updateReadingView();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }
        
        // العودة إلى قائمة المكتبة
        function showBooksView() {
            booksSection.style.display = 'block';
            readingContainer.style.display = 'none';
            
            // إعادة تحميل الكتب
            renderBooks(books);
            booksSection.querySelector('.section-title').textContent = " أنمي";
        }
        
        // تبديل قائمة الإعدادات
        function toggleSettingsMenu(e) {
            e.stopPropagation();
            settingsMenu.classList.toggle('active');
        }
        
        // الذهاب إلى الصفحة الرئيسية
        function goToHomePage() {
            window.location.href = 'index.html';
        }
        
        // تحديث الصفحة
        function refreshPage() {
            window.location.reload();
        }
        
        // تصفية الكتب حسب الفئة
        function filterBooks(category) {
            if (category === 'all') {
                renderBooks(books);
            } else {
                const filteredBooks = books.filter(book => book.category === category);
                renderBooks(filteredBooks);
            }
        }
        
        // تنفيذ البحث
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (searchTerm === '') {
                renderBooks(books);
                return;
            }
            
            const results = books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) || 
                book.author.toLowerCase().includes(searchTerm) ||
                book.description.toLowerCase().includes(searchTerm)
            );
            
            renderBooks(results);
        }
        
        // تهيئة الموقع عند تحميل DOM
        document.addEventListener('DOMContentLoaded', initSite);
    </script>
</body>
</html>